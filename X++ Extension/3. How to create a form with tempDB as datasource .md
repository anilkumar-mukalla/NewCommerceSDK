# This document is to create a form with TempDB table as datasource.

# Purpose
This document is to create a form with TempDB table as datasource to help check if one customer has multiple primary postal address   


## 1. The SQL script to check <br/>

```sql

```
<img width="628" alt="image" src="https://github.com/zhangguanghuib/NewCommerceSDK/assets/14832260/f981f13d-d1c3-488a-8193-c7c84d325223">

## 2. How to get all the field id and field name based on the table id?,  Take salestable as example. <br/>

```sql
        select count(T4.RECID) as PrimaryAdresssCnt, T5.ACCOUNTNUM, T5.DATAAREAID from DIRPARTYLOCATION as T1
            join DIRPARTYTABLE as T2 on T1.PARTY = T2.RECID
            join LOGISTICSLOCATION as T3 on T1.LOCATION = T3.RECID
            join LOGISTICSPOSTALADDRESS as T4 on T4.LOCATION = T1.LOCATION
            join CUSTTABLE as T5 on T1.PARTY = T5.PARTY
            where T1.ISPRIMARY = 1 and T4.VALIDFROM < GETUTCDATE() and T4.VALIDTO > GETUTCDATE()
            group by T5.ACCOUNTNUM, T5.DATAAREAID
            having count(T4.RECID) > 1
```

##  3. How it works finally?<br/>
<img width="370" alt="image" src="https://github.com/zhangguanghuib/NewCommerceSDK/assets/14832260/3d4546c0-ad7f-417c-a1a5-ec9b04ce20c1"><br/>
Then open the form to list all  customer who has multiple primary postal address<br/>
![image](https://github.com/zhangguanghuib/NewCommerceSDK/assets/14832260/7c949dd8-0105-4e76-aa5a-373f71fb8eb9)<br/>
